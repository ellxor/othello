warnings = -Wextra
optimize = -O3 -march=native
includes = -Isrc

rule cc
  command = cc -c $in -o $out $includes $warnings $optimize

rule link
  command = cc $in -o $out $optimize

build build/magic.o: cc src/magic.c
build build/main.o : cc src/main.c
build build/othello: link build/magic.o build/main.o

default build/othello
